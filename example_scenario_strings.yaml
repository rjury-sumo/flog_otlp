name: "Example Log Pattern Scenario with strings file replacements"
description: "Example Log Pattern Scenario with strings file replacements"

# **Formatting Variables**:
# - `%s` - Lorem ipsum sentence using lorem-text
# - `%n[x,y]` - Random integer between x and y (inclusive)
# - `%e` - Current epoch timestamp  
# - `%x[n]` - Lowercase hexadecimal with n characters (e.g., `%x[8]` → "a1b2c3d4")
# - `%X[n]` - Uppercase hexadecimal with n characters (e.g., `%X[4]` → "A1B2")
# - `%r[n]` - Random string of letters/digits with length n
# - `%g` - GUID format (8-4-4-4-12 hex digits, e.g., "a1b2c3d4-e5f6-7890-abcd-ef0123456789")
# - `%S[key]` - Custom string from strings file (e.g., `%S[users]` → "alice.johnson")

steps:
  - start_time: "0s"
    interval: "5s"
    iterations: 1
    parameters:
      format: "json"
      number: 20
      sleep: "5s"
    replacements:
      # # Anonymize user IDs with random numbers
      # - pattern: 'user[_-]?id[=:]\d+'
      #   replacement: "user_id=%n[10000,99999]"
      # # Replace IP addresses with random ones 123 to show it's been changed  
      # - pattern: '123\.\d{1,3}\.\d{1,3}\.\d{1,3}'
      #   replacement: "%n[10,192].%n[1,255].%n[1,255].%n[1,255]"
      # - pattern: 'message[=:]"[^"]*recovery[^"]*"'
      #   replacement: 'message="System recovery in progress: %s"'
      # # Generate correlation IDs for distributed tracing
      # - pattern: 'correlation[_-]?id[=:]\w+'
      #   replacement: "correlation_id=%g"
      # Replace guid with a random new GUIDs
      - pattern: '^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$'
        replacement: "%g"
      # Modify request paths to use strings from example_scenario_strings.yaml
      # custom request paths for services and actions
      - pattern: '"request" *: *"[^"\\]+'
        replacement: '"request": "/myapi/%S[services]/%S[actions]'
      # replace http status with a 5XX code from a specificed list
      - pattern: '"status" *: *[0-9]+'
        replacement: '"status": %S[http_statuses_5xx]'
      # full replacement example replacing whole message with CEF format examples
      # - pattern: '.*'
      #   replacement: "%S[cef_checkpoint]"